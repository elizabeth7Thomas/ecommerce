{
  "info": {
    "name": "E-Commerce API - Complete Collection",
    "description": "API completa para sistema de e-commerce con autenticaci√≥n JWT",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "adminToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "clienteId",
      "value": "",
      "type": "string"
    },
    {
      "key": "productoId",
      "value": "",
      "type": "string"
    },
    {
      "key": "ordenId",
      "value": "",
      "type": "string"
    },
    {
      "key": "direccionId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üè† Auth - Autenticaci√≥n",
      "item": [
        {
          "name": "üìù Register - Registrar usuario",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre_usuario\": \"testuser\",\n  \"correo_electronico\": \"test@example.com\",\n  \"contrasena\": \"password123\",\n  \"nombre_rol\": \"cliente\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    pm.collectionVariables.set('token', pm.response.json().token);",
                  "    pm.collectionVariables.set('userId', pm.response.json().user.id_usuario);",
                  "    console.log('Token guardado:', pm.collectionVariables.get('token'));",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "üîê Login - Iniciar sesi√≥n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"correo_electronico\": \"test@example.com\",\n  \"contrasena\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.set('token', pm.response.json().token);",
                  "    pm.collectionVariables.set('userId', pm.response.json().user.id_usuario);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "üë§ Get Profile - Obtener perfil",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            }
          }
        },
        {
          "name": "‚úèÔ∏è Update Profile - Actualizar perfil",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre_usuario\": \"testuser_updated\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            }
          }
        },
        {
          "name": "üîí Change Password - Cambiar contrase√±a",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contrasena_actual\": \"password123\",\n  \"contrasena_nueva\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "change-password"]
            }
          }
        }
      ]
    },
    {
      "name": "üë• Clientes",
      "item": [
        {
          "name": "üìã Get My Profile - Obtener mi perfil de cliente",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/clientes/perfil",
              "host": ["{{baseUrl}}"],
              "path": ["clientes", "perfil"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.set('clienteId', pm.response.json().id_cliente);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "‚ûï Create Cliente - Crear perfil de cliente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_usuario\": \"{{userId}}\",\n  \"nombre\": \"Juan\",\n  \"apellido\": \"P√©rez\",\n  \"telefono\": \"+502 1234-5678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clientes",
              "host": ["{{baseUrl}}"],
              "path": ["clientes"]
            }
          }
        },
        {
          "name": "‚úèÔ∏è Update Cliente - Actualizar cliente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Juan Carlos\",\n  \"apellido\": \"P√©rez Garc√≠a\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clientes/{{clienteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clientes", "{{clienteId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "üì¶ Productos",
      "item": [
        {
          "name": "üìã Get All Products - Obtener todos los productos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/productos",
              "host": ["{{baseUrl}}"],
              "path": ["productos"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 && pm.response.json().length > 0) {",
                  "    pm.collectionVariables.set('productoId', pm.response.json()[0].id_producto);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "üîç Get Product by ID - Obtener producto por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/productos/{{productoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["productos", "{{productoId}}"]
            }
          }
        },
        {
          "name": "‚ûï Create Product - Crear producto (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_categoria\": 1,\n  \"nombre_producto\": \"Laptop Gaming ASUS\",\n  \"descripcion\": \"Laptop gaming con RTX 3060, 16GB RAM, 1TB SSD\",\n  \"precio\": 8999.99,\n  \"stock\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/productos",
              "host": ["{{baseUrl}}"],
              "path": ["productos"]
            }
          }
        }
      ]
    },
    {
      "name": "üè∑Ô∏è Categor√≠as",
      "item": [
        {
          "name": "üìã Get All Categories - Obtener todas las categor√≠as",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/categorias",
              "host": ["{{baseUrl}}"],
              "path": ["categorias"]
            }
          }
        },
        {
          "name": "üîç Get Category by ID - Obtener categor√≠a por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/categorias/1",
              "host": ["{{baseUrl}}"],
              "path": ["categorias", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "üìç Direcciones",
      "item": [
        {
          "name": "üìã Get My Addresses - Obtener mis direcciones",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/direcciones",
              "host": ["{{baseUrl}}"],
              "path": ["direcciones"]
            }
          }
        },
        {
          "name": "‚ûï Create Address - Crear direcci√≥n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"calle\": \"Avenida Siempre Viva 742\",\n  \"ciudad\": \"Guatemala\",\n  \"estado\": \"Guatemala\",\n  \"codigo_postal\": \"01001\",\n  \"pais\": \"Guatemala\",\n  \"es_principal\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/direcciones",
              "host": ["{{baseUrl}}"],
              "path": ["direcciones"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    pm.collectionVariables.set('direccionId', pm.response.json().direccion.id_direccion);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "üîç Get Address by ID - Obtener direcci√≥n por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/direcciones/{{direccionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["direcciones", "{{direccionId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "üõí Carrito",
      "item": [
        {
          "name": "üìã Get My Cart - Obtener mi carrito",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/carrito",
              "host": ["{{baseUrl}}"],
              "path": ["carrito"]
            }
          }
        },
        {
          "name": "‚ûï Add to Cart - Agregar producto al carrito",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_producto\": \"{{productoId}}\",\n  \"cantidad\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/carrito",
              "host": ["{{baseUrl}}"],
              "path": ["carrito"]
            }
          }
        },
        {
          "name": "‚ûñ Remove from Cart - Remover producto del carrito",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/carrito/{{productoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["carrito", "{{productoId}}"]
            }
          }
        },
        {
          "name": "üóëÔ∏è Clear Cart - Vaciar carrito",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/carrito/clear",
              "host": ["{{baseUrl}}"],
              "path": ["carrito", "clear"]
            }
          }
        }
      ]
    },
    {
      "name": "üìã √ìrdenes",
      "item": [
        {
          "name": "‚ûï Create Order - Crear orden desde carrito",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id_direccion_envio\": \"{{direccionId}}\",\n  \"notas_orden\": \"Por favor entregar antes de las 5pm\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ordenes",
              "host": ["{{baseUrl}}"],
              "path": ["ordenes"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    pm.collectionVariables.set('ordenId', pm.response.json().orden.id_orden);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "üìã Get My Orders - Obtener mis √≥rdenes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ordenes",
              "host": ["{{baseUrl}}"],
              "path": ["ordenes"]
            }
          }
        },
        {
          "name": "üîç Get Order by ID - Obtener orden por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ordenes/{{ordenId}}",
              "host": ["{{baseUrl}}"],
              "path": ["ordenes", "{{ordenId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "üí≥ Pagos",
      "item": [
        {
          "name": "üìã Get Order Payments - Obtener pagos de una orden",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/ordenes/{{ordenId}}/pagos",
              "host": ["{{baseUrl}}"],
              "path": ["ordenes", "{{ordenId}}", "pagos"]
            }
          }
        },
        {
          "name": "‚ûï Create Payment - Crear pago para orden",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"metodo_pago\": \"tarjeta_credito\",\n  \"monto\": 8999.99,\n  \"estado_pago\": \"completado\",\n  \"transaccion_id\": \"txn_123456789\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ordenes/{{ordenId}}/pagos",
              "host": ["{{baseUrl}}"],
              "path": ["ordenes", "{{ordenId}}", "pagos"]
            }
          }
        }
      ]
    },
    {
      "name": "üõ†Ô∏è Admin - Funciones de Administrador",
      "item": [
        {
          "name": "üîê Admin Login - Login como administrador",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"correo_electronico\": \"admin@ecommerce.com\",\n  \"contrasena\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.set('adminToken', pm.response.json().token);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "üë• Get All Users - Obtener todos los usuarios",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/usuarios",
              "host": ["{{baseUrl}}"],
              "path": ["usuarios"]
            }
          }
        },
        {
          "name": "üîÑ Update Order Status - Actualizar estado de orden",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"estado_orden\": \"procesando\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ordenes/{{ordenId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["ordenes", "{{ordenId}}", "status"]
            }
          }
        }
      ]
    }
  ]
}